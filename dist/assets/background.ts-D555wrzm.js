import{p as c,i as o}from"./index-CESIhZ8T.js";const i=async()=>{try{const t=`persist:${c.key}`,s=(await chrome.storage.local.get(t))[t],e=JSON.parse(s);return JSON.parse(e.settings)}catch{return o}},d=async()=>({settings:await i()}),g=async t=>{const s=await chrome.tabs.query({url:"https://www.youtube.com/*"});for(const e of s)try{e.id&&chrome.tabs.sendMessage(e.id,{type:"settings-changed",data:{settings:t}})}catch{}};chrome.tabs.onUpdated.addListener(async(t,s)=>{s.url&&await chrome.tabs.sendMessage(t,{type:"url-changed"})});chrome.runtime.onMessage.addListener((t,s,e)=>{const{type:a,data:n}=t;switch(a){case"content-loaded":return d().then(r=>e(r)),!0;case"settings-changed":return g(n.settings).then(()=>e()),!0}});
